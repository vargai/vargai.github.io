<!DOCTYPE html>
<html lang="en">
<head>
    <title>Route on map </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css">
    <style>
      .icon {
        max-width: 70%;
        max-height: 70%;
        margin: 4px;
      }
    </style>
</head>
<body>
    <div id="map" style="width: 100vw; height: 100vh;"></div>
	<div>
	Overlay:
	<button onclick='disableMap1()'>Disable map 1</button>
	</div>
</body>
<script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"></script>
<script src="https://unpkg.com/togeojson@0.14.2"></script>
<script src="./leaflet_files/leaflet.filelayer.js"></script>
<script>
	
	var csiktile;
    var control;
    var L = window.L;
    var osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; 2013 OpenStreetMap contributors'
    });
	var map = L.map('map', {
            center: [46.4173444962783, 25.984230237329033],
            zoom: 10
        }).addLayer(osm); 
		
    function initMap() {
        
        L.Control.FileLayerLoad.LABEL = '<img class="icon" src="./leaflet_files/folder.svg" alt="file icon"/>';
        control = L.Control.fileLayerLoad({
            layer: L.geoJson,
			// See http://leafletjs.com/reference.html#geojson-options
			layerOptions: {style: {color:'red'}},
			// Add to map after loading (default: true) ?
			addToMap: true,
			// File size limit in kb (default: 1024) ?
			fileSizeLimit: 102400,
			// Restrict accepted file formats (default: .geojson, .json, .kml, and .gpx) ?
			formats: [
				'.geojson',
				'.kml',
				'.gpx'
			]
        });
		
		csiktile =L.tileLayer(
			'http://routemap.freecluster.eu/tiles/csik/QTiles/{z}/{x}/{y}.jpg', 
			{maxZoom: 15, 
			tms: false, 
			attribution: 'Generated by QTiles'
		}).addTo(map);

		
        control.addTo(map);
        control.loader.on('data:loaded', function (e) {
			layerswitcher.addOverlay(event.layer, event.filename);
            var layer = e.layer;
            console.log(layer);
        });
    }

    window.addEventListener('load', function () {
        initMap();
    });
	
	
	function disableMap1() {
		console.log("disableMap1");
		if (map.hasLayer(csiktile)) {
			console.log("disableMap1 - has image");
			map.removeLayer(csiktile);
		  }
		  else {
			console.log("disableMap1 - has no image");
			csiktile.addTo(map);
		  }
	}
</script>
</html>
